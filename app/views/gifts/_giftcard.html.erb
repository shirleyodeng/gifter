<%= cl_image_tag gift.photo, width: 190, height: 190, crop: :fill, class: "gift-photo" %>
<div class="gift-info">
  <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal<%= gift.id %>">
    <%= gift.capitalized_name %>
  </button>
  <div id="myModal<%= gift.id %>" class="modal" role="dialog">
    <div class="modal-dialog modal-background-color">
      <div class="modal-content">
      <button type="button" class="close" data-dismiss="modal">&times;</button>
        <div class="modal-body">
          <div>
            <div class="modal-title">
              <p>You have selected</p>
              <h4><%= gift.capitalized_name %></h4>
            </div>
            <div class="modal-info">
             <%= cl_image_tag (gift.photo), width: 200, height: 200, crop: :fill, class: "gift-photo" %>
             <p><%= gift.description %></p>
            </div>
          </div>
          <div class="modal-pay">
           <div class="jar"><%= image_tag "jamjar.jpg" %></div>
            <div class="contributions">
              <% if gift.participations.where(state: 'paid').empty? %>
                <p>Be the first to contribute!</p>
                <div class="modal-padding"><strong>£<%= gift.price %></strong></div>
                <%= simple_form_for @participation do |f| %>
                  <%= f.hidden_field :gift_id, value: gift.id %>
                  <%= f.input :amount %>
                  <%= f.submit 'Contribute', class: 'btn-red' %>
                <% end %>
              <% else %>
                <div class="contributors">
                  <div class="contributors-container">
                    <% gift.participations.where(state: 'paid').each do |participation| %>
                      <% if participation.user.photo? %>
                        <%= cl_image_tag participation.user.photo, class: "contributor-avatar" %>
                      <% else %>
                        <%= cl_image_tag 'default-profile-image', class: "contributor-avatar" %>
                      <% end %>
                    <% end %>
                  </div>
                  <%= render 'contributors', gift: gift %>
                </div>
                <div class="modal-padding">
                  <strong>£<%= gift.price %></strong></br>
                  <strong>Remaining: £<%= gift.amount_left %></strong>
                </div>
                <% if gift.amount_left.zero? %>
                  <p>This gift has been fulfilled!</p>
                <% else %>
                  <%= simple_form_for @participation do |f| %>
                    <%= f.hidden_field :gift_id, value: gift.id %>
                    <%= f.input :amount %>
                    <%= f.submit 'Contribute', class: 'btn-red' %>
                  <% end %>
                <% end %>
              <% end %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
